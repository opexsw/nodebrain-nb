<html>
<head>
<meta name="generator" content="nbman2ht">
<meta name="Content-Style" content="text/css">
<title>NodeBrain Manual Page</title>
<style>
  body  {font-family: verdana; font-size: 10pt;}
  table {font-size: 10pt;}
  h3    {font-size: 10pt;}
  pre   {font-size: 10pt;}
</style>
</head>
<body>
<table width="100%"><tr>
<td align="left" width="20%">nb.cfg(5)</td>
<td align="center" width="60%"><span style="font-size: 14pt">NodeBrain Administrator Guide</span>
<br>Version 0.7.4 - February 2009</td>
<td align="right" width="20%">nb.cfg(5)</td>
</tr></table>
<p style="font-size: 7pt">
<a href="#NAME">NAME</a>
| <a href="#SYNOPSIS">SYNOPSIS</a>
| <a href="#DESCRIPTION">DESCRIPTION</a>
| <a href="#COMMANDS">COMMANDS</a>
| <a href="#ENVIRONMENT">ENVIRONMENT</a>
| <a href="#DIAGNOSTICS">DIAGNOSTICS</a>
| <a href="#HISTORY">HISTORY</a>
| <a href="#BUGS">BUGS</a>
| <a href="#AUTHOR">AUTHOR</a>
| <a href="#SEE ALSO">SEE ALSO</a>
</p>
<hr>
<!--  Process this file with "groff -man -Tascii foo.1" or "nbman2ht foo.1" -->
<!--  See NodeBrain Developer Guide for project standards -->
<!--  -->
<a name="NAME"></a>
<h3>NAME</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
nb.cfg - NodeBrain Configuration Files
</td></tr></table>
<a name="SYNOPSIS"></a>
<h3>SYNOPSIS</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
<b>~/.nb/user.nb</b>
<p><b>.nb/caboodle.nb</b>
<p><b>*.nb</b>
<p></td></tr></table>
<a name="DESCRIPTION"></a>
<h3>DESCRIPTION</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
This primer describes basic NodeBrain configuration concepts.  For a
more complete understanding of individual commands, refer to the
<i>NodeBrain Language Reference</i> available at http://www.nodebrain.org. 
<p>We call a NodeBrain application directory a <b>caboodle</b>.  NodeBrain does not dictate
the structure of a caboodle, but we assume it is organized logically as a set of sub-directories
containing rule files, event collector servants, alarm adapters, log files, etc.  It is best
to make file references relative to a caboodle's root directory so components can be easily
used in multiple caboodles without modification.
<p>When <b>nb</b>(1) starts, it first processes an optional user profile <b>~/.nb/user.nb</b>, if found.
It then processes an optional caboodle profile <b>.nb/caboodle.nb</b>, if found.
The syntax of these files is the same as any *.nb rule file.  They are only special because
they are processed without explicit reference, and they are not listed when processed.
Other NodeBrain *.nb rule files are processed when explicitly referenced as an executable
script, a file argument, or included by another rule file.
<p>The user profile should contain declarations and definitions you always want to be available
when executing <b>nb</b>(1) as a given user.  The caboodle profile should contain declarations
and definitions you want to be available when executing <b>nb</b>(1) within a given
caboodle.  
NodeBrain doesn't care how other *.nb files are constructed, organized and managed.  However, we
assume that a caboodle is structured in some way and perhaps supported by a set of tools that
simplify rule development and maintenance.  
<p></td></tr></table>
<a name="COMMANDS"></a>
<h3>COMMANDS</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
Examples of commands you will want to understand for basic NodeBrain configuration are introduced here.
<p>Identities are typically declared in <b>~/.nb/user.nb</b> or <b>.nb/caboodle.nb</b> files because
they are needed by multiple NodeBrain scripts in most applications.
<p><ul>
declare <i>identity</i> identity <i>rank</i>;<br>
<br>
</ul>
<p>Identities are used by nodes that support communication with other applications or
other instances of NodeBrain. 
Authentication is the responsibility
of any node module providing communication with external entities.
Here's an example of a &quot;peer.client&quot; node that uses an
identity for authentication and authorization. 
Refer to the <i>NodeBrain Module Reference</i> for module configuration instructions.
<p><ul>
# define a peer node<br>
<br>
define <i>node</i> node peer.client(&quot;<i>identity</i>@<i>host</i>:<i>port</i>&quot;);<br>
<br>
</ul>
<p>Use the SOURCE or %INCLUDE command to include commands from another file.
This helps to organize rules into logical sets for maintenance and reuse. 
<p><ul>
# source commands from another file<br>
<br>
source <i>file</i>,[<i>assertions</i>];<br>
<br>
</ul>
<p><ul>
- or -<br>
<br>
</ul>
<p><ul>
%include <i>file</i>,[<i>assertions</i>];<br>
<br>
</ul>
<p>The
<a href="nb.syn.html"><b>nb.syn</b></a>(5) man page provides more information on command syntax.
You should at least scan it if you plan to do anything with NodeBrain application
rule files (<i>*</i>.nb).
<p></td></tr></table>
<a name="ENVIRONMENT"></a>
<h3>ENVIRONMENT</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
Some of the C functions nb
calls (e.g. for loading dynamic modules) are influenced by environment variables in
ways we assume you can figure out for your environment.
<p><table width="100%" border="0" cellspacing="0" cellpadding="5">
<tr><td width="5%" align="left" valign="top">NB_MODULE_PATH&nbsp;&nbsp;&nbsp;</td><td width="94%" align="left" valign="top">
The NB_MODULE_PATH variable provides a platform independent way of specifying a path
for locating NodeBrain modules.  This path overrides the native system
search paths by qualifying module names so that a search is avoided.  The following
example illustrates a setting that directs NodeBrain to search the current directory
first and then the parent directory when loading modules (plug-ins).
</td></tr>
<tr><td width="5%" align="left" valign="top">&nbsp;&nbsp;&nbsp;</td><td width="94%" align="left" valign="top">
NB_MODULE_PATH=&quot;./:../&quot; nb myscript.nb<br>
</td></tr></table>
</td></tr></table>
<a name="DIAGNOSTICS"></a>
<h3>DIAGNOSTICS</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
When errors are found in configuration files, NodeBrain displays
an error message. Because user and caboodle profile 
lines are not displayed, it may be difficult to identify the line causing the error.
To work around this problem you can rename your profile and execute it
under the new name.
<p><table width="100%" border="0" cellspacing="0" cellpadding="5">
<tr><td width="5%" align="left" valign="top">&nbsp;&nbsp;&nbsp;</td><td width="94%" align="left" valign="top">
$ cd ~/.nb<br>
$ mv user.nb user.nb%<br>
$ nb user.nb%      ... find the problem<br>
$ vi user.nb%      ... resolve the problem<br>
$ nb user.nb%      ... verify <br>
$ mv user.nb% user.nb<br>
</td></tr></table>
See
<a href="nb.html"><b>nb</b></a>(1) for information on message format.
</td></tr></table>
<a name="HISTORY"></a>
<h3>HISTORY</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
The <b>~/.nb/user.nb</b> file was introduced with NodeBrain Protocol (NBP) client authentication in March, 2000, although it was originally called private.nb and renamed in version 0.7.1.
<p>The <b>.nb/caboodle.nb</b> file was introduced in version 0.7.1 in July, 2008.
<p></td></tr></table>
<a name="BUGS"></a>
<h3>BUGS</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
There are no known bugs in the processing of configuration files.
Please report bugs by linking to the project page from the home page, 
http://www.nodebrain.org, or send email to &lt;bugs@nodebrain.org&gt;.
</td></tr></table>
<a name="AUTHOR"></a>
<h3>AUTHOR</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
Ed Trettevik &lt;eat@nodebrain.org&gt;
</td></tr></table>
<a name="SEE ALSO"></a>
<h3>SEE ALSO</h3>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td width="5%">&nbsp;</td>
<td width="94%" valign="top" align="left">
<a href="nb.html"><b>nb</b></a>(1),
<a href="nb.man.html"><b>nb.man</b></a>(7),
<a href="nb.syn.html"><b>nb.syn</b></a>(5),
<a href="nb.mod.html"><b>nb.mod</b></a>(7),
<a href="nb.lib.html"><b>nb.lib</b></a>(3) 
<p><p>[1] <a href="http://www.nodebrain.org"><i>NodeBrain Home Page </i></a><br>
<p><p>[2] <a href="http://www.nodebrain.org"><i>NodeBrain Tutorial </i></a><br>
<p><p>[3] <a href="http://www.nodebrain.org"><i>NodeBrain User Guide </i></a><br>
<p><p>[4] <a href="http://www.nodebrain.org"><i>NodeBrain Language Reference </i></a><br>
<p><p>[5] <a href="http://www.nodebrain.org"><i>NodeBrain Module Reference </i></a><br>
<p><p>[6] <a href="http://www.nodebrain.org"><i>NodeBrain API Reference </i></a><br>
</td></table>
<hr>
<table width="100%"><tr><td align="left" width="33%">NodeBrain 0.7.4</td><td align="center" width="34%">February 2009</td><td align="right" width="33%">nb.cfg(5)</td></tr></table>
