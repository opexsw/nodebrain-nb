#!../nb/nb
~ > #!../nb/nb
#
~ > #
# File: cellStaticBoolUnknown.nb
~ > # File: cellStaticBoolUnknown.nb
#
~ > #
# Test cell static expression - Boolean Unknown
~ > # Test cell static expression - Boolean Unknown
#================================================
~ > #================================================

# Define rule to enable 9 cells
~ > # Define rule to enable 9 cells

define r1 if(e1 & e2 & e3 & e4 & e5 & e6 & e7 & e8 & e9 & eA & eB);
~ > define r1 if(e1 & e2 & e3 & e4 & e5 & e6 & e7 & e8 & e9 & eA & eB);

# Test with literal numbers
~ > # Test with literal numbers

assert e1==(?    );
~ > assert e1==(?    );
assert e2==(not ?);
~ > assert e2==(not ?);
assert e3==(1 & ?);
~ > assert e3==(1 & ?);
assert e4==(? & 1);
~ > assert e4==(? & 1);
assert e5==(? & ?);
~ > assert e5==(? & ?);
assert e6==(? | ?);
~ > assert e6==(? | ?);
assert e7==(? ^ 0);
~ > assert e7==(? ^ 0);
assert e8==(0 ^ ?);
~ > assert e8==(0 ^ ?);
assert e9==(? ^ 1);
~ > assert e9==(? ^ 1);
assert eA==(1 ^ ?);
~ > assert eA==(1 ^ ?);
assert eB==(? ^ ?);
~ > assert eB==(? ^ ?);

show -cells;
~ > show -cells;
~ @ = ! == node 
~ r1 = ! == if(e1&(e2&(e3&(e4&(e5&(e6&(e7&(e8&(e9&(eA&eB))))))))));
~ eB = ? == (?^?)
~ eA = ? == (1^?)
~ e9 = ? == (?^1)
~ e8 = ? == (0^?)
~ e7 = ? == (?^0)
~ e6 = ?
~ e5 = ?
~ e4 = ?
~ e3 = ?
~ e2 = ?
~ e1 = ?

# Test with variable numbers
~ > # Test with variable numbers

assert t=1;
~ > assert t=1;
assert f=0;
~ > assert f=0;
assert u=?;
~ > assert u=?;

assert e1==(u    );
~ > assert e1==(u    );
assert e2==(not u);
~ > assert e2==(not u);
assert e3==(t & u);
~ > assert e3==(t & u);
assert e4==(u & t);
~ > assert e4==(u & t);
assert e5==(u & u);
~ > assert e5==(u & u);
assert e6==(u | u);
~ > assert e6==(u | u);
assert e7==(u ^ f);
~ > assert e7==(u ^ f);
assert e8==(f ^ u);
~ > assert e8==(f ^ u);
assert e9==(u ^ t);
~ > assert e9==(u ^ t);
assert eA==(t ^ u);
~ > assert eA==(t ^ u);
assert eB==(u ^ u);
~ > assert eB==(u ^ u);

show -cells;
~ > show -cells;
~ @ = ! == node 
~ u = ?
~ f = 0
~ t = 1
~ r1 = ! == if(e1&(e2&(e3&(e4&(e5&(e6&(e7&(e8&(e9&(eA&eB))))))))));
~ eB = ? == (u^u)
~ eA = ? == (t^u)
~ e9 = ? == (u^t)
~ e8 = ? == (f^u)
~ e7 = ? == (u^f)
~ e6 = ? == (u|u)
~ e5 = ? == (u&u)
~ e4 = ? == (u&t)
~ e3 = ? == (t&u)
~ e2 = ? == (!u)
~ e1 = ? == u

# Test with literal string (can only represent True)
~ > # Test with literal string (can only represent True)

assert e1==( u       );
~ > assert e1==( u       );
assert e2==(not u    );
~ > assert e2==(not u    );
assert e3==("a" &  u );
~ > assert e3==("a" &  u );
assert e4==( u  & "a");
~ > assert e4==( u  & "a");
assert e5==( u  &  u );
~ > assert e5==( u  &  u );
assert e6==( u  |  u );
~ > assert e6==( u  |  u );
assert e7==( u  ^  f );
~ > assert e7==( u  ^  f );
assert e8==( f  ^  u );
~ > assert e8==( f  ^  u );
assert e9==( u  ^ "a");
~ > assert e9==( u  ^ "a");
assert eA==("a" ^  u );
~ > assert eA==("a" ^  u );
assert eB==( u  ^  u );
~ > assert eB==( u  ^  u );

show -cells;
~ > show -cells;
~ @ = ! == node 
~ u = ?
~ f = 0
~ t = 1
~ r1 = ! == if(e1&(e2&(e3&(e4&(e5&(e6&(e7&(e8&(e9&(eA&eB))))))))));
~ eB = ? == (u^u)
~ eA = ? == ("a"^u)
~ e9 = ? == (u^"a")
~ e8 = ? == (f^u)
~ e7 = ? == (u^f)
~ e6 = ? == (u|u)
~ e5 = ? == (u&u)
~ e4 = ? == (u&"a")
~ e3 = ? == u
~ e2 = ? == (!u)
~ e1 = ? == u

# Test with variable string
~ > # Test with variable string

assert a="a";
~ > assert a="a";

assert e1==(u    );
~ > assert e1==(u    );
assert e2==(not u);
~ > assert e2==(not u);
assert e3==(a & u);
~ > assert e3==(a & u);
assert e4==(u & a);
~ > assert e4==(u & a);
assert e5==(u & u);
~ > assert e5==(u & u);
assert e6==(u | u);
~ > assert e6==(u | u);
assert e7==(u ^ f);
~ > assert e7==(u ^ f);
assert e8==(f ^ u);
~ > assert e8==(f ^ u);
assert e9==(u ^ a);
~ > assert e9==(u ^ a);
assert eA==(a ^ u);
~ > assert eA==(a ^ u);
assert eB==(u ^ u);
~ > assert eB==(u ^ u);

show -cells;
~ > show -cells;
~ @ = ! == node 
~ a = "a"
~ u = ?
~ f = 0
~ t = 1
~ r1 = ! == if(e1&(e2&(e3&(e4&(e5&(e6&(e7&(e8&(e9&(eA&eB))))))))));
~ eB = ? == (u^u)
~ eA = ? == (a^u)
~ e9 = ? == (u^a)
~ e8 = ? == (f^u)
~ e7 = ? == (u^f)
~ e6 = ? == (u|u)
~ e5 = ? == (u&u)
~ e4 = ? == (u&a)
~ e3 = ? == (a&u)
~ e2 = ? == (!u)
~ e1 = ? == u

# Verify that all e1-eB cells above have a value of "?"
~ > # Verify that all e1-eB cells above have a value of "?"
